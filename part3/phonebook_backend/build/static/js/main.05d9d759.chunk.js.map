{"version":3,"sources":["services/persons.js","components/Notification.js","components/Persons.js","components/PersonForm.js","components/Filter.js","App.js","index.js"],"names":["baseUrl","logger","getAll","axios","get","then","response","data","create","newObject","post","load","setPersons","clear","id","delete","update","put","Notification","message","num","string","className","Display","person","persons","setNum","setErrorMessage","name","number","onClick","event","window","confirm","i","personService","catch","error","console","log","setTimeout","filter","Persons","toLowerCase","includes","map","PersonForm","addName","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","value","onChange","type","Filter","newFilter","handleFilterChange","App","useState","setNewName","setNewNumber","setNewFilter","errorMessage","useEffect","target","preventDefault","find","n","changedPerson","returnedPerson","per","nameObject","added","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.05d9d759.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    return (\n        axios.post(baseUrl, newObject).then(response => response.data)\n      )\n  }\n\nconst clear = id => {\n    return (\n        axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n    )\n}\n\nconst load = setPersons => {\n    return (\n        axios.get(baseUrl).then(response => {setPersons(response.data)})\n      )\n}\n\nconst update = (id, newObject) => {\n    return (\n        axios.put(`${baseUrl}/${id}`, newObject)\n        .then(response => response.data)\n    )\n  }\n\n  const logger = { \n    getAll,\n    create,\n    load,\n    clear,\n    update\n  }\n\n  export default logger;","import React from 'react'\n\nconst Notification = ({ message, num}) => {\n    if (message === null) {\n      return null\n    }\n    const string = `error${num}`\n    return (\n      <div className={string}>\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification","import React from 'react'\nimport personService from '/Users/jennipuhakka/puh/src/services/persons'\n\n\n\nconst Display = ({person, setPersons, persons, setNum, setErrorMessage}) => {\n    const handleButtonClick = (event) => {\n      if (window.confirm(`Do you really want to delete ${person.name}?`)) {  \n        const i = person.id\n        personService.clear(i)\n        .catch(error => {\n          console.log('fail',error)\n          setErrorMessage(\n            `Information of '${person.name}' has already been removed from server`\n          )\n          setNum(1)\n      \n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n  \n        })\n        \n        setPersons(persons.filter(person => person.id !== i))\n  \n        setErrorMessage(\n          `'${person.name}' was deleted succesfully`\n        )\n        setNum(1)\n  \n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      }\n    }\n  \n    return (\n      <p>{person.name} {person.number}\n        <button onClick={handleButtonClick}>delete</button>\n      </p>)\n  }\n  \n  const Persons = ({persons, filter, setPersons, setNum, setErrorMessage}) => {\n    const show = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n    \n    return (show.map(person =>\n        <Display key={person.name} person={person} setPersons={setPersons} persons={persons} setNum={setNum} setErrorMessage={setErrorMessage}/>))\n  }\n  \n  export default Persons","import React from 'react'\n\n\nconst PersonForm = ({addName, newName, newNumber, handleNameChange, handleNumberChange}) => {\n    return (\n    <form onSubmit={addName}>\n      <div>\n        name: <input \n        value={newName}\n        onChange={handleNameChange}/>\n      </div>\n      <div>\n        number: <input \n        value={newNumber}\n        onChange={handleNumberChange}/>\n      </div>\n       <div>\n        <button type=\"submit\">add</button>\n      </div>\n      </form>\n    )\n  }\n\n  export default PersonForm","import React from 'react'\n\nconst Filter = ({newFilter, handleFilterChange}) => {\n    return (\n      <div>\n        filter shown with: <input \n        value={newFilter}\n        onChange={handleFilterChange}/>\n      </div>\n    )\n  }\n\n  export default Filter","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\nimport Notification from './components/Notification'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [num, setNum] = useState(1)\n\n\n  useEffect(() => {\n    personService.load(setPersons)\n  }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    if (persons.map(persons => persons.name).includes(newName) & (newName !== '' & newNumber !== '')) {\n      const person = persons.find(n => n.name === newName)\n\n      if (window.confirm(`Do you want to change ${person.name}'s number to ${newNumber}?`)) {\n        const changedPerson = { ...person, number: newNumber}\n        personService.update(person.id, changedPerson)\n        .then(returnedPerson => {\n          setPersons(persons.map(per => per.id !== person.id ? per : returnedPerson))}\n          )\n        .catch(error => {\n          console.log('fail',error)\n          setErrorMessage(\n            `Information of '${person.name}' has already been removed from server`\n          )\n          setNum(1)\n      \n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n\n          setPersons(persons.filter(n => n.id !== person.id))\n        })\n      }\n\n      setErrorMessage(\n        `${person.name}'s number was changed succesfully`\n      )\n      setNum(3)\n      \n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      setNewName('')\n      setNewNumber('')\n\n    } else { \n      const nameObject = {\n        name: newName,\n        number: newNumber,\n    }\n    var i = 0\n    personService.create(nameObject)\n      .then(added => {\n        setPersons(persons.concat(added))\n      })\n      .catch(error => {\n        console.log(error.response.data.error)\n        i = 1\n        setErrorMessage(\n          `${error.response.data.error}`\n        )\n        setNum(1)\n\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n\n      if (i === 0) {\n        setErrorMessage(\n          `'${nameObject.name}' was added succesfully`\n        )\n        setNum(2)\n\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      }\n\n      setNewName('')\n      setNewNumber('')\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} num={num}/>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n      <h2>add a new</h2>\n      <PersonForm addName={addName} newName={newName} newNumber={newNumber}\n      handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={newFilter} setPersons={setPersons} setNum={setNum} setErrorMessage={setErrorMessage}/>\n    </div>\n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}